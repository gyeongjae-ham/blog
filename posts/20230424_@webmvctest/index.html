<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Test Double | 안녕루카</title>
<meta name="keywords" content="Test">
<meta name="description" content="Mock 이란 가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다
가짜 객체를 만드는 이유 실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다
Test Double 테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다
자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 Service layer는 DAO에 직접적으로 의존하고, 따라서 Database까지 의존하는 형태를 갖는다">
<meta name="author" content="">
<link rel="canonical" href="https://hiyee-gj.github.io/blog/posts/20230424_@webmvctest/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hiyee-gj.github.io/blog/img/xLzaaP9J.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hiyee-gj.github.io/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hiyee-gj.github.io/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hiyee-gj.github.io/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://hiyee-gj.github.io/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Test Double" />
<meta property="og:description" content="Mock 이란 가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다
가짜 객체를 만드는 이유 실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다
Test Double 테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다
자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 Service layer는 DAO에 직접적으로 의존하고, 따라서 Database까지 의존하는 형태를 갖는다" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hiyee-gj.github.io/blog/posts/20230424_@webmvctest/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T22:23:00+09:00" />
<meta property="article:modified_time" content="2023-04-24T22:23:00+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Test Double"/>
<meta name="twitter:description" content="Mock 이란 가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다
가짜 객체를 만드는 이유 실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다
Test Double 테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다
자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 Service layer는 DAO에 직접적으로 의존하고, 따라서 Database까지 의존하는 형태를 갖는다"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hiyee-gj.github.io/blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Test Double",
      "item": "https://hiyee-gj.github.io/blog/posts/20230424_@webmvctest/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Test Double",
  "name": "Test Double",
  "description": "Mock 이란 가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다\n가짜 객체를 만드는 이유 실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다\nTest Double 테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다\n자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 Service layer는 DAO에 직접적으로 의존하고, 따라서 Database까지 의존하는 형태를 갖는다",
  "keywords": [
    "Test"
  ],
  "articleBody": "Mock 이란 가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다\n가짜 객체를 만드는 이유 실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다\nTest Double 테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다\n자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 Service layer는 DAO에 직접적으로 의존하고, 따라서 Database까지 의존하는 형태를 갖는다\n테스트 형태 Sociable Test 의존 관계가 간단한 경우 테스트 대상과 의존하고 있는 대상을 함께 테스트할 수 있다. Sociable Test에서 우리가 테스트하는 Service 객체는 실제로 동작하는 DAO(Repository) 객체를 통해 데이터베이스에 엑세스한다\nSolitary Test 테스트 대상이 아닌 의존성이 맺어진 대상의 결함으로 테스트가 실패하는 경우가 발생할 수 있다. 의존 대상 때문에 테스트가 실패하는 것을 막기 위해서 의존 대상 대신에 실제 동작하는 것처럼 보이는 별개의 객체를 만드는 것을 생각해볼 수 있다. 이 방식을 Solitary Test라고 한다\n이 때, 만드는 별개의 객체를 Test Double(테스트 더블) 이라고 한다. 즉, 테스트 코드에서 Service가 데이터베이스를 실제로 조작하는 DAO 대신에 가짜 DAO를 사용하게 만드는 것이다\n테스트 더블은 테스트하고자 하는 대상만 독립적으로 테스트할 수 있도록 별개로 구현한 실제 객체보다 단순한 객체를 의미한다. 테스트 대상을 SUT(System Under Test)라고 하고, SUT가 의존하고 있는 구성요소를 DOC(Depended-on Component)라고 하는데, 테스트 더블은 이 DOC와 동일한 API를 제공한다.\n테스트 더블의 종류 테스트 더블도 테스트에서 수행하는 역할에 따라서 많은 종류로 나뉜다. 대표적으로는 Dummy, Fake, Stub, Spy, Mock 5가지로 크게 분류된다.\nDummy Dummy는 아무런 동작도 하지 않는다. 주로 파라미터로 전달되기 위해서 사용된다.\n예를 들어 로깅을 하는 객체는 테스트에서는 사용되지 않을 수 있다. 그렇다면 아래와 같이 아무런 행위를 가지지 않은 Dummy를 만들어볼 수 있을 것이다.\npublic interface Logger { void log(); } public class LoggerDummy implements Logger { @Override public void log() { } } Fake Fake는 실제 동작하는 구현을 가지고 있지만, 프로덕션에서는 사용되기 적합하지 않은 객체이다.\n예를 들어 위 그림처럼 LoginService가 실제 프로덕션에서는 AccountDao에 의존하여 데이터베이스를 사용하고 있다. 하지만 테스트코드에서는 데이터베이스 대신에 HashMap을 사용하는 FakeAccountDao를 대신 LoginService에 주입하여, 데이터베이스와 연결을 끊고 테스트할 수 있다.\npublic class BoardDaoFake implements BoardDao { // 실제 dao 대신에 fake dao private final Map\u003cPosition, Piece\u003e fakeBoard = new HashMap\u003c\u003e(); // ... @Override public void createPiece(RoomId roomId, Position position, Piece piece) { fakeBoard.put(position, piece); } // ... Stub Stub은 Dummy가 마치 실제로 동작하는 것처럼 보이게 만든 객체이다. 미리 반환할 데이터가 정의되어 있으며, 메소드를 호출하였을 경우 그것을 그대로 반환하는 역할만 수행한다.\nSpy 실체 객체를 부분적으로 Stubbing하면서 동시에 약간의 정보를 기록하는 객체이다. 기록하는 정보에는 메소드 호출 여부, 메소드 호출 횟수 등이 포함된다.\nMock 호출에 대한 기대를 명세할 수 있고, 그 명세 내용에 따라 동작하도록 프로그래밍된 객체이다. Mock외의 것은 개발자가 임의로 코드를 사용하여 생성할 수 있지만, Mock은 라이브러리에 의해 동적으로 생성된다. 또한 설정에 따라서 충분히 Dummy, Stub, Spy처럼 동작할 수 있어서 가장 강력한 테스트 더블이라고 할 수 있다\n",
  "wordCount" : "451",
  "inLanguage": "en",
  "datePublished": "2023-04-24T22:23:00+09:00",
  "dateModified": "2023-04-24T22:23:00+09:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hiyee-gj.github.io/blog/posts/20230424_@webmvctest/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "안녕루카",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hiyee-gj.github.io/blog/img/xLzaaP9J.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hiyee-gj.github.io/blog/" accesskey="h" title="안녕루카 (Alt + H)">안녕루카</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hiyee-gj.github.io/blog/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://hiyee-gj.github.io/blog/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://hiyee-gj.github.io/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://hiyee-gj.github.io/blog/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hiyee-gj.github.io/blog/">Home</a>&nbsp;»&nbsp;<a href="https://hiyee-gj.github.io/blog/posts/">Posts</a></div>
    <h1 class="post-title">
      Test Double
    </h1>
    <div class="post-meta"><span title='2023-04-24 22:23:00 +0900 +0900'>April 24, 2023</span>&nbsp;·&nbsp;3 min

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#mock-%ec%9d%b4%eb%9e%80" aria-label="Mock 이란">Mock 이란</a><ul>
                        
                <li>
                    <a href="#%ea%b0%80%ec%a7%9c-%ea%b0%9d%ec%b2%b4%eb%a5%bc-%eb%a7%8c%eb%93%9c%eb%8a%94-%ec%9d%b4%ec%9c%a0" aria-label="가짜 객체를 만드는 이유">가짜 객체를 만드는 이유</a></li></ul>
                </li>
                <li>
                    <a href="#test-double" aria-label="Test Double">Test Double</a></li>
                <li>
                    <a href="#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ed%98%95%ed%83%9c" aria-label="테스트 형태">테스트 형태</a><ul>
                        
                <li>
                    <a href="#sociable-test" aria-label="Sociable Test">Sociable Test</a></li>
                <li>
                    <a href="#solitary-test" aria-label="Solitary Test">Solitary Test</a></li></ul>
                </li>
                <li>
                    <a href="#%ed%85%8c%ec%8a%a4%ed%8a%b8-%eb%8d%94%eb%b8%94%ec%9d%98-%ec%a2%85%eb%a5%98" aria-label="테스트 더블의 종류">테스트 더블의 종류</a><ul>
                        
                <li>
                    <a href="#dummy" aria-label="Dummy">Dummy</a></li>
                <li>
                    <a href="#fake" aria-label="Fake">Fake</a></li>
                <li>
                    <a href="#stub" aria-label="Stub">Stub</a></li>
                <li>
                    <a href="#spy" aria-label="Spy">Spy</a></li>
                <li>
                    <a href="#mock" aria-label="Mock">Mock</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="mock-이란">Mock 이란<a hidden class="anchor" aria-hidden="true" href="#mock-이란">#</a></h2>
<p>가짜 객체라고 불리며, 객체의 행위를 검증하기 위해 사용되는 가짜 객체이다</p>
<h3 id="가짜-객체를-만드는-이유">가짜 객체를 만드는 이유<a hidden class="anchor" aria-hidden="true" href="#가짜-객체를-만드는-이유">#</a></h3>
<p>실제 객체를 만드는데 드는 시간을 절약하고, 의존성의 연결고리가 많이 연결된 경우에 구현의 복잡함을 피하고 간단하게 테스트 검증을 하기 위해서 쓴다</p>
<h2 id="test-double">Test Double<a hidden class="anchor" aria-hidden="true" href="#test-double">#</a></h2>
<p>테스트 더블은 영화를 촬영할 때 배우를 대신하여 위험한 역할을 하는 스턴트 더블이라는 용어에서 유래된 단어이다</p>
<p>자동화된 테스트를 작성할 때, 여러 객체들이 의존성을 갖는 경우 테스트하기 까다로운 경우가 있다. 예를 들어서 프로덕션 코드에서 <code>Service layer</code>는 <code>DAO</code>에 직접적으로 의존하고, 따라서 <code>Database</code>까지 의존하는 형태를 갖는다</p>
<h2 id="테스트-형태">테스트 형태<a hidden class="anchor" aria-hidden="true" href="#테스트-형태">#</a></h2>
<h3 id="sociable-test">Sociable Test<a hidden class="anchor" aria-hidden="true" href="#sociable-test">#</a></h3>
<p>의존 관계가 간단한 경우 테스트 대상과 의존하고 있는 대상을 함께 테스트할 수 있다. <code>Sociable Test</code>에서 우리가 테스트하는 <code>Service</code> 객체는 실제로 동작하는 <code>DAO(Repository)</code> 객체를 통해 데이터베이스에 엑세스한다</p>
<h3 id="solitary-test">Solitary Test<a hidden class="anchor" aria-hidden="true" href="#solitary-test">#</a></h3>
<p>테스트 대상이 아닌 의존성이 맺어진 대상의 결함으로 테스트가 실패하는 경우가 발생할 수 있다. 의존 대상 때문에 테스트가 실패하는 것을 막기 위해서 의존 대상 대신에 <strong>실제 동작하는 것처럼 보이는 별개의 객체를 만드는 것을 생각해볼 수 있다.</strong> 이 방식을 <code>Solitary Test</code>라고 한다</p>
<p>이 때, 만드는 별개의 객체를 <strong>Test Double(테스트 더블)</strong> 이라고 한다. 즉, 테스트 코드에서 <code>Service</code>가 데이터베이스를 실제로 조작하는 <code>DAO</code> 대신에 가짜 <code>DAO</code>를 사용하게 만드는 것이다</p>
<p>테스트 더블은 테스트하고자 하는 대상만 독립적으로 테스트할 수 있도록 별개로 구현한 실제 객체보다 단순한 객체를 의미한다. 테스트 대상을 <code>SUT(System Under Test)</code>라고 하고, <code>SUT</code>가 의존하고 있는 구성요소를 <code>DOC(Depended-on Component)</code>라고 하는데, 테스트 더블은 이 <code>DOC</code>와 동일한 <code>API</code>를 제공한다.</p>
<h2 id="테스트-더블의-종류">테스트 더블의 종류<a hidden class="anchor" aria-hidden="true" href="#테스트-더블의-종류">#</a></h2>
<p>테스트 더블도 테스트에서 수행하는 역할에 따라서 많은 종류로 나뉜다. 대표적으로는 <code>Dummy</code>, <code>Fake</code>, <code>Stub</code>, <code>Spy</code>, <code>Mock</code> 5가지로 크게 분류된다.</p>
<h3 id="dummy">Dummy<a hidden class="anchor" aria-hidden="true" href="#dummy">#</a></h3>
<p><code>Dummy</code>는 아무런 동작도 하지 않는다. 주로 파라미터로 전달되기 위해서 사용된다.</p>
<p>예를 들어 로깅을 하는 객체는 테스트에서는 사용되지 않을 수 있다. 그렇다면 아래와 같이 아무런 행위를 가지지 않은 <code>Dummy</code>를 만들어볼 수 있을 것이다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Logger</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">log</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoggerDummy</span> <span style="color:#66d9ef">implements</span> Logger <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">log</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="fake">Fake<a hidden class="anchor" aria-hidden="true" href="#fake">#</a></h3>
<p><a href="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*snrzYwepyaPu3uC9.png"><img loading="lazy" src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*snrzYwepyaPu3uC9.png" alt=""  />
</a></p>
<p><code>Fake</code>는 실제 동작하는 구현을 가지고 있지만, 프로덕션에서는 사용되기 적합하지 않은 객체이다.</p>
<p>예를 들어 위 그림처럼 <code>LoginService</code>가 실제 프로덕션에서는 <code>AccountDao</code>에 의존하여 데이터베이스를 사용하고 있다. 하지만 테스트코드에서는 데이터베이스 대신에 <code>HashMap</code>을 사용하는 <code>FakeAccountDao</code>를 대신 <code>LoginService</code>에 주입하여, 데이터베이스와 연결을 끊고 테스트할 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BoardDaoFake</span> <span style="color:#66d9ef">implements</span> BoardDao <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 실제 dao 대신에 fake dao
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Map<span style="color:#f92672">&lt;</span>Position<span style="color:#f92672">,</span> Piece<span style="color:#f92672">&gt;</span> fakeBoard <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">createPiece</span><span style="color:#f92672">(</span>RoomId roomId<span style="color:#f92672">,</span> Position position<span style="color:#f92672">,</span> Piece piece<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        fakeBoard<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>position<span style="color:#f92672">,</span> piece<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...
</span></span></span></code></pre></div><h3 id="stub">Stub<a hidden class="anchor" aria-hidden="true" href="#stub">#</a></h3>
<p><a href="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KdpZaEVy6GNnrUpB.png"><img loading="lazy" src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KdpZaEVy6GNnrUpB.png" alt=""  />
</a></p>
<p><code>Stub</code>은 <code>Dummy</code>가 마치 실제로 동작하는 것처럼 보이게 만든 객체이다. 미리 반환할 데이터가 정의되어 있으며, 메소드를 호출하였을 경우 그것을 그대로 반환하는 역할만 수행한다.</p>
<h3 id="spy">Spy<a hidden class="anchor" aria-hidden="true" href="#spy">#</a></h3>
<p>실체 객체를 부분적으로 <code>Stubbing</code>하면서 동시에 약간의 정보를 기록하는 객체이다. 기록하는 정보에는 메소드 호출 여부, 메소드 호출 횟수 등이 포함된다.</p>
<h3 id="mock">Mock<a hidden class="anchor" aria-hidden="true" href="#mock">#</a></h3>
<p><a href="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k7mwTF60slyMxRlm.png"><img loading="lazy" src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k7mwTF60slyMxRlm.png" alt=""  />
</a></p>
<p><strong>호출에 대한 기대를 명세할 수 있고, 그 명세 내용에 따라 동작하도록 프로그래밍된 객체</strong>이다. <code>Mock</code>외의 것은 개발자가 임의로 코드를 사용하여 생성할 수 있지만, <code>Mock</code>은 라이브러리에 의해 동적으로 생성된다. 또한 설정에 따라서 충분히 <code>Dummy</code>, <code>Stub</code>, <code>Spy</code>처럼 동작할 수 있어서 <strong>가장 강력한 테스트 더블이라고 할 수 있다</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hiyee-gj.github.io/blog/tags/test/">Test</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://hiyee-gj.github.io/blog/posts/20230422_controller_%ED%85%8C%EC%8A%A4%ED%8A%B8/">
    <span class="title">Next »</span>
    <br>
    <span>Controller 테스트 작성</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on twitter"
        href="https://twitter.com/intent/tweet/?text=Test%20Double&amp;url=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f&amp;hashtags=Test">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f&amp;title=Test%20Double&amp;summary=Test%20Double&amp;source=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f&title=Test%20Double">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on whatsapp"
        href="https://api.whatsapp.com/send?text=Test%20Double%20-%20https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Test Double on telegram"
        href="https://telegram.me/share/url?text=Test%20Double&amp;url=https%3a%2f%2fhiyee-gj.github.io%2fblog%2fposts%2f20230424_%40webmvctest%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://hiyee-gj.github.io/blog/">안녕루카</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
